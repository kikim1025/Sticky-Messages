(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(68)},50:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(12),o=a.n(s),l=a(6),i=a(7),c=a(9),d=a(8),m=a(10),g=a(11),u=a.n(g),h=a(13),p=a(5),w=a(3),b=(a(50),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).getInput=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.state={modal:!1,dropdown:!1,dropdownVal:"Choose Receiver",dropdownValId:"",title:"",body:"",alert:"",alertModal:""},a.toggleModal=a.toggleModal.bind(Object(p.a)(Object(p.a)(a))),a.toggleDropdown=a.toggleDropdown.bind(Object(p.a)(Object(p.a)(a))),a.changeDropdownVal=a.changeDropdownVal.bind(Object(p.a)(Object(p.a)(a))),a.sendMessage=a.sendMessage.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"toggleModal",value:function(){this.setState({dropdownVal:"Choose Receiver",dropdownValId:"",title:"",body:"",alert:"",alertModal:"",modal:!this.state.modal})}},{key:"toggleDropdown",value:function(){this.setState({dropdown:!this.state.dropdown})}},{key:"changeDropdownVal",value:function(e){this.setState({dropdownVal:e.target.name,dropdownValId:e.target.id})}},{key:"sendMessage",value:function(){var e=this;if(this.state.title.length>0&&this.state.body.length>0&&this.state.dropdownValId.length>0){var t={headers:{"x-access-token":this.props.jwt}};u.a.post("/api/message",{title:this.state.title,body:this.state.body,receiver:this.state.dropdownValId},t).then(function(t){e.toggleModal(),200===t.data.status?e.props.getData():401===t.data.status?e.props.logout():e.setState({alert:"Something with request or server database went wrong."})})}else this.setState({alertModal:"Title and body of message cannot be empty, and the receiver must be chosen in the dropdown menu."})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"button-container--post-message"},r.a.createElement(w.a,{id:"button--modal",onClick:this.toggleModal},"Post a Sticky Message"),r.a.createElement("div",null,this.state.alert),r.a.createElement(w.f,{isOpen:this.state.modal,toggle:this.toggleModal},r.a.createElement(w.i,{toggle:this.toggleModal},"A New Sticky Message"),r.a.createElement("div",{id:"alert--modal"},this.state.alertModal),r.a.createElement(w.g,null,r.a.createElement("form",null,r.a.createElement(w.b,{isOpen:this.state.dropdown,toggle:this.toggleDropdown},r.a.createElement(w.e,{color:"info",caret:!0},this.state.dropdownVal),r.a.createElement(w.d,null,this.props.userList.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(w.c,{name:t.username,id:t._id,onClick:e.changeDropdownVal},t.username),r.a.createElement(w.c,{divider:!0}))}))),r.a.createElement("div",{id:"input-modal"},r.a.createElement("textarea",{className:"input-modal--input",name:"title",onChange:this.getInput,cols:"48",rows:"1",maxLength:"15",placeholder:"Write a title here"}),r.a.createElement("hr",null),r.a.createElement("textarea",{className:"input-modal--input",name:"body",onChange:this.getInput,cols:"48",rows:"10",maxLength:"300",placeholder:"Write a message here"})))),r.a.createElement(w.h,null,r.a.createElement(w.a,{color:"primary",onClick:this.sendMessage},"Submit Message"),r.a.createElement(w.a,{color:"danger",onClick:this.toggleModal},"Cancel"))))}}]),t}(r.a.Component)),v=(a(54),function(e){return r.a.createElement("div",{className:"message"},r.a.createElement("div",{className:"message__title"},"Title: ",e.title),r.a.createElement("div",{className:"message__sender"},"From: ",e.sender.username),r.a.createElement("div",{className:"message__receiver"},"To: ",e.receiver.username),r.a.createElement("div",{className:"message__body"},e.body))}),f=(a(56),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={messageList:[],userList:[],alert:""},a.getData=function(){u.a.get("/api/user").then(function(e){200===e.data.status?a.setState({userList:e.data.data}):a.setState({alert:"Something with request or server database went wrong."})}),u.a.get("/api/message").then(function(e){200===e.data.status?a.setState({messageList:e.data.data}):a.setState({alert:"Something with request or server database went wrong."})})},a.componentDidMount=function(){a.getData()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"home-page__container"},r.a.createElement(b,{jwt:this.props.jwt,userList:this.state.userList,getData:this.getData,logout:this.props.logout}),0===this.state.messageList.length?r.a.createElement("div",{id:"alert-temp"},"Retrieving messages..."):this.state.messageList.map(function(e,t){return r.a.createElement(v,{title:e.title,body:e.body,sender:e.sender,receiver:e.receiver,key:t})}))}}]),t}(r.a.Component)),E=(a(58),function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"Username:\xa0",r.a.createElement("input",{name:"username",onChange:e.getLoginInput,type:"text",maxLength:"15"})),"\xa0",r.a.createElement("div",null,"Password: \xa0",r.a.createElement("input",{name:"password",onChange:e.getLoginInput,type:"password",maxLength:"15"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"button--loginform",name:"login",onClick:e.handleLoginForm},"Login"),r.a.createElement("button",{className:"button--loginform",name:"create",onClick:e.handleLoginForm},"Create Account"),r.a.createElement("hr",null),r.a.createElement("div",null,"New Users: Simply enter a new username and a password to create a new account!"))}),j=(a(60),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",alert:a.props.alert},a.getLoginInput=function(e){e.preventDefault(),a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleLoginForm=function(e){e.preventDefault(),a.state.username.length&&a.state.password.length?"login"===e.target.name?u.a.post("/api/user/login",{username:a.state.username,password:a.state.password}).then(function(e){200===e.data.status?a.props.login(e.data.data.token):401===e.data.status?a.setState({alert:"Username or password is wrong."}):a.setState({alert:"Something with request or server database went wrong."})}):"create"===e.target.name&&u.a.post("/api/user",{username:a.state.username,password:a.state.password}).then(function(e){200===e.data.status?a.setState({alert:"Welcome ".concat(e.data.data,"! Please now login with the new username and password.")}):403===e.data.status&&"MongoError"===e.data.message.name?a.setState({alert:"Username already exists. Please choose different username."}):a.setState({alert:"Something with request or server database went wrong."})}):a.setState({alert:"Username and password must be longer than 0 and shorter than 15."})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"alert"},this.state.alert),r.a.createElement(E,{getLoginInput:this.getLoginInput,handleLoginForm:this.handleLoginForm}))}}]),t}(r.a.Component)),y=(a(62),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={jwt:"",loggedIn:!1,alert:""},a.login=function(e){a.setState({jwt:e,loggedIn:!0})},a.logout=function(){a.setState({jwt:"",alert:"Token expired. Please log in again.",loggedIn:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"main"},this.state.loggedIn?r.a.createElement("div",{id:"home-page"},r.a.createElement(f,{jwt:this.state.jwt,logout:this.logout})):r.a.createElement("div",{id:"login-page"},r.a.createElement(j,{login:this.login,alert:this.state.alert})))}}]),t}(r.a.Component));a(64),a(66);o.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[26,2,1]]]);
//# sourceMappingURL=main.2a25a302.chunk.js.map